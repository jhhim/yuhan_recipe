<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>게시물 상세 페이지</title>
    <style>	
		/*버튼 스타일*/
		.button-style {
		      display: inline-block;
			  padding: 10px 20px;
			  background-color: #f0f0f0;
			  border: 1px solid #ccc;
			  color: #333;
			  text-decoration: none;
			  font-weight: bold;
			  border-radius: 4px;
			  text-align: center;
			  cursor: pointer;
			  transition: background-color 0.3s, color 0.3s;
		}
		
		/* 버튼에 호버 효과 추가*/
		.button-style:hover {
		     background-color: #333;
  			 color: #fff;
		}
	</style>
</head>
<body>
		<!-- 게시물 수정 버튼과 게시물 삭제 버튼 -->
	<div th:if="${#strings.equals(board.nickname, session.loggedInNickname)}">
	    <a th:href="@{'/edit/' + ${board.postId}}" class="button">
		    <button class="button-style">수정</button>
		</a>
		<a th:href="@{'/delete/' + ${board.postId}}" class="button" onclick="return confirm('정말로 삭제하시겠습니까?');">
		    <button class="button-style">삭제</button>
		</a>
	</div>

    <h1 th:text="${board.title}">게시물 제목</h1>
    <p th:text="${board.nickname}">작성자</p>
    <p th:text="${#temporals.format(board.created_date, 'yyyy-MM-dd HH:mm')}">작성일</p>
    
    <div th:text="${board.content}" class="content">게시물 내용</div>
    
 
    <!-- 댓글 작성 폼 -->
      <h2>댓글 작성</h2>
   <form th:action="@{/addComment}" method="post">
       <!-- 게시물 ID를 숨은 필드로 전달 -->
       <input type="hidden" th:name="postId" th:value="${board.postId}" />
       <textarea th:name="content" placeholder="댓글 내용"></textarea><br/>
       <button type="submit">댓글 작성</button>
   </form>

     <h2>댓글</h2>
	<ul>
	    <li th:each="comment : ${comment}">
	        <div style="display: flex; align-items: center;">
	            <!-- 댓글 내용 -->
	            <div style="flex-grow: 1;">
	                <p>
	                    작성자: <span th:text="${comment.nickname}">작성자</span><br>
	                    작성일: <span th:text="${#temporals.format(comment.created_date, 'yyyy-MM-dd HH:mm')}">작성일</span><br>
	                    댓글 내용: <span th:text="${comment.content}">댓글 내용</span>
	                </p>
	            </div>
	
	            <!-- 게시물 수정/삭제 버튼 -->
	            <div th:if="${#strings.equals(comment.nickname, session.loggedInNickname)}">
	                <a th:href="@{'/editcomment/' + ${comment.commentId} + '/' + ${comment.postId}}" class="button">
	                    <button class="button-style">수정</button>
	                </a>
	                <a th:href="@{'/deletecomment/' + ${comment.commentId} + '/' + ${comment.postId}}" class="button" onclick="return confirm('정말로 삭제하시겠습니까?');">
	                    <button class="button-style">삭제</button>
	                </a>
	            </div>
	        </div>
	    </li>
	</ul>

 	<script th:inline="javascript">
	        var commentdeleteMessage = /*[[${commentdeleteMessage}]]*/ "";
	        if (commentdeleteMessage) {
	            alert(commentdeleteMessage);
	        }
    </script>
    
    <script th:inline="javascript">
	        var boardeditMessage = /*[[${boardeditMessage}]]*/ "";
	        if (boardeditMessage) {
	            alert(boardeditMessage);
	        }
    </script>
</body>
</html>